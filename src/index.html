<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Campsite VR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <script>
      AFRAME.registerComponent("soft-fire-flicker", {
        init() {
          this.light = this.el;
          this.base = 0.6;
        },
        tick(t) {
          const flicker = 0.05 * Math.sin(t / 120);
          this.light.setAttribute("intensity", this.base + flicker);
        }
      });
    </script>



  </head>
  <body>
    <a-scene>
      <a-assets>
        <img id="nightSky" src="../assets/hdris/vrw_night_sky.jpg">
        <a-asset-item id="campfireModel" src="../assets/models/Campfire.glb"></a-asset-item>
        <img id="groundTex" src="../assets/images/ground.jpg" />

      </a-assets>
      <a-sky
        src="#nightSky"
        rotation="-12 -90 0"
        shader="flat">
      </a-sky>
      <a-light type="ambient" intensity="0.5"></a-light>


      <a-plane
        rotation="-90 0 0"
        width="40"
        height="40"
        material="src: #groundTex;
          repeat: 12 12;
          roughness: 1;
          metalness: 0;
          color: #aaaaaa">
      </a-plane>



    
      <!-- Campfire -->
      <a-entity
        gltf-model="#campfireModel"
        position="0 0 -2"
        rotation="0 180 0"
        scale="0.3 0.3 0.3"
        material="emissive: #000000; emissiveIntensity: 0">
        <a-light
          type="point"
          color="#ffb36a"
          intensity="0.6"
          distance="4"
          decay="2"
          position="0 0.6 0"
          soft-fire-flicker>
        </a-light>

      </a-entity>

      <!-- Sitting log -->
      





      <a-camera position="0 1.6 0"></a-camera>
    </a-scene>
  </body>
</html>
